<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Editar Perfil</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .avatar-option {
            cursor: pointer;
            border: 2px solid transparent;
        }

        .avatar-option.selected {
            border-color: #0d6efd;
        }
    </style>
</head>

<body>
<div class="container mt-5">
    <h1>Editar Perfil</h1>

    <h2>Escolha um Avatar</h2>

    <form th:action="@{'/perfis/atualizar/' + ${perfil.id}}" th:object="${perfil}" method="post">

        <input type="hidden" name="fotoUrl" id="fotoUrl" required>

        <div class="row">
            <div class="col-4 col-md-3 mb-3" th:each="seed : ${seeds}">
                <img th:src="'https://api.dicebear.com/9.x/bottts-neutral/svg?seed=' + ${seed}"
                     th:attr="data-url='https://api.dicebear.com/9.x/bottts-neutral/svg?seed=' + ${seed}"
                     class="img-fluid rounded-circle avatar-option"
                     width="100" height="100"
                     onclick="selectAvatar(this)">
            </div>
        </div>

        <div class="col-md-6">
            <label for="apelido" class="form-label">Apelido</label>
            <input type="text" th:field="*{apelido}" class="form-control" id="apelido" required>
        </div>

        <div class="col-md-6">
            <label for="nascimento" class="form-label">Ano de Nascimento</label>
            <input type="date" th:field="*{nascimento}" class="form-control" id="nascimento" required>
        </div>

        <div class="col-md-6">
            <label for="generoPreferidoPrincipal" class="form-label">Genero Preferido Principal</label>
            <select th:field="*{generoPreferidoPrincipal}" class="form-select" id="generoPreferidoPrincipal" required>
                <option value="" disabled selected>Selecione o Genero Preferido Principal</option>
                <option value="Ação">Ação</option>
                <option value="Aventura">Aventura</option>
                <option value="RPG">RPG (Role-Playing Game)</option>
                <option value="Estratégia">Estratégia</option>
                <option value="Simulação">Simulação</option>
                <option value="Puzzle">Puzzle</option>
                <option value="FPS">FPS (First-Person Shooter)</option>
                <option value="MOBA ">MOBA </option>
                <option value="Ação">Ação</option>
                <option value="MMORPG ">MMORPG</option>
                <option value="BattleRoyale">Battle Royale</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="generoPreferidoSecundario" class="form-label">Genero Preferido Secundario</label>
            <select th:field="*{generoPreferidoSecundario}" class="form-select" id="generoPreferidoSecundario" required>
                <option value="" disabled selected>Selecione o Genero Preferido Secundario</option>
                <option value="Ação">Ação</option>
                <option value="Aventura">Aventura</option>
                <option value="RPG">RPG (Role-Playing Game)</option>
                <option value="Estratégia">Estratégia</option>
                <option value="Simulação">Simulação</option>
                <option value="Puzzle">Puzzle</option>
                <option value="FPS">FPS (First-Person Shooter)</option>
                <option value="MOBA ">MOBA </option>
                <option value="Ação">Ação</option>
                <option value="MMORPG ">MMORPG</option>
                <option value="BattleRoyale">Battle Royale</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="comunicacao" class="form-label">Plataforma de Comunicação</label>
            <select th:field="*{comunicacao}" class="form-select" id="comunicacao" required>
                <option value="" disabled selected>Selecione a Plataforma de Comunicação</option>
                <option value="Discord">Discord</option>
                <option value="TeamSpeak">TeamSpeak</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="plataforma" class="form-label">Plataforma</label>
            <select th:field="*{plataforma}" class="form-select" id="plataforma" required>
                <option value="" disabled selected>Selecione a Plataforma</option>
                <option value="PC">PC</option>
                <option value="Playstation">Playstation</option>
                <option value="Xbox">Xbox</option>
                <option value="Switch">Switch</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="periodoOnline" class="form-label">Periodo Online</label>
            <select th:field="*{periodoOnline}" class="form-select" id="periodoOnline" required>
                <option value="" disabled selected>Selecione o Periodo Online</option>
                <option value="Matutino">Matutino</option>
                <option value="Vespertino">Vespertino</option>
                <option value="Noturno">Noturno</option>
                <option value="Madrugada">Madrugada</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="estiloDeJogo" class="form-label">Estilo De Jogo</label>
            <select th:field="*{estiloDeJogo}" class="form-select" id="estiloDeJogo" required>
                <option value="" disabled selected>Selecione o Estado Civil</option>
                <option value="Competitivo">Competitivo</option>
                <option value="Casual">Casual</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="descricao" class="form-label">Descrição</label>
            <input type="text" th:field="*{descricao}" class="form-control" id="descricao" required>
        </div>

        <div class="col-md-6">
            <label for="estadoCivil" class="form-label">Estado Civil</label>
            <select th:field="*{estadoCivil}" class="form-select" id="estadoCivil" required>
                <option value="" disabled selected>Selecione o Estado Civil</option>
                <option value="Solteiro">Solteiro</option>
                <option value="Casado">Casado</option>
                <option value="Viúvo">Viúvo</option>
            </select>
        </div>

        <button type="submit" class="btn btn-success">Salvar Alterações</button>
        <a th:href="@{/perfis}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>

<script th:src="@{/js/script.js}"></script>
<script>
    function selectAvatar(imgEl) {
        document.querySelectorAll('.avatar-option').forEach(el => el.classList.remove('selected'));
        imgEl.classList.add('selected');
        document.getElementById('fotoUrl').value = imgEl.getAttribute('data-url');
    }
</script>
</body>
</html>
